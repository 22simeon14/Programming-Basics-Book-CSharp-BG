# Глава 10. Хитрости и хакове

В настоящата глава ще се запознаем с някои хитрости, хакове и техники за по-ефективно програмиранe.

TODO


## Форматиране на кода
  <p>  Правилното форматиране на нашия код ще го направи по-четим и разбираем в случай, че се наложи някой друг, а не ние да го четем и да се опитваме да разберем. Това е важно, защото в практиката ще ни се наложи да работим в екип с други хора и е от голямо значение дали пишем кода си така, че колегите ни да могат лесно да го четат.</p>
  <p>&nbsp;&nbsp; Има определени правила за правилно форматиране на кода, които събрани в едно се наричат **конвенции**. Конвенция е група от правила общо приети от програмистите на даден език и се ползват масово. Тези конвенции помагат за изграждането на норми в дадени езици как е най-добре да се пише и какви са добрите практики и се приема, че ако един програмист ги спазва то той е добър програмист и кода му е лесно четим и разбираем.</p>
  <p>&nbsp;&nbsp; Езикът C# е направен от **Microsoft** и те са тези, които определят най-добрите практики за писане. Трябва да знаете също така, че дори да не спазвате конвенцията наложена от **Microsoft** то кода ви ще работи (стига да е написан правилно), но просто няма да бъде лесно разбираем, което не е фатално на основно ниво, но колкото по-бързо свикнете да пишете качествен код, толкова по-добре.</p>
  <p>
&nbsp;&nbsp; За форматиране на кода от Microsoft се препоръчва **къдравите скоби("{}")** да са на нов ред и под конструкцията към която са използвани, както е в примера по-долу.

```cs
if(true)
{
    Console.WriteLine("влязох в if-a");
}
```

 Вижда се също така, че командата в примера е **4 празни полета навътре (2 таб-а)**, което също се препоръчва от **Microsoft**.
 Също така ако дадена конструкция с къдрави скоби е 4 празни полета навътре то **къдравите скоби("{}")** трябва да са в началото на конструкцията, както е в примера по-долу.
 ```cs
 if(true)
 {
    if(true)
    {
        Console.WriteLine("влязох в if-a");
    }
 }
 ```
 Ето това е пример за лошо форматиран код спрямо общо приетата конвенция за писане на код на езика C#
   
 ```cs
 if(true){
 Console.WriteLine("влязох в if-a");}
 ```
 Първото, което се забелязва са **къдравите скоби("{}")**. Горната трябва да е **под if условието** и втората трябва да е **под коментара на празен ред**.В допълнение командата вътре в if конструкцията  трябва да бъде **4 празни полета навътре (2 таб-а)**. Същото правило важи и за **for цикли и всякакви други конструкции с къдрави скоби("{}")**. При for цикли и по принцип, когато слагате условие и имате променливи и знаци е хубаво да **оставяте празно място.**
 Правилно -
```cs
for(int i = 0; i < 5; i++)
{
    Console.WriteLine(i);
}
```
Грешно -
```cs
for(int i=0;i<5;i++){
Console.WriteLine(i);
}
```

&nbsp;&nbsp; За ваше удобство има **бързи клавиши във Visual Studio** за които ще говорим повече, но засега ни интересуват 2 конкретни комбинации. Едната комбинация е за форматиране на **цял код**, а другата комбинация за форматиране на **част от кода**. Ако искаме да форматираме целия код то трябва да натиснем **CTRL(Контрол) + K и след това CTRL(Контрол) + D**. В случай, че искаме да форматираме само част от кода, то ние трябва да маркираме частта, която искаме да форматираме, с мишката и да натиснем **CTRL(Контрол) + K след което CTRL(Контрол) + F.**<br/>
 Нека използваме грешния пример преди малко:
 ```cs
for(int i=0;i<5;i++){
Console.WriteLine(i);
}
```
ако натиснем **CTRL(Контрол) + K и след това CTRL(Контрол) + D**, което е нашата комбинация за форматиране на целия документ ще получим код форматиран според **общо приетата конвенция за C#** и ще изглежда ето така

```cs
for (int i = 0; i < 5; i++)
{
    Console.WriteLine(i);
}
```
Това ни помага ако работим в екип и някой от колегите ни не си е форматирал кода правилно или просто сме махали много неща и кода ни не е добре форматиран.
## Именуване на елементите на кода
<p>&nbsp;&nbsp; В тази под глава ще се фокусираме върху **общо приетата конвенция за именуване на прокети, файлове и променливи наложена от Microsoft.**
&nbsp;&nbsp;**За именуване на прокети и файлове** се препоръчва описателно име, което подсказва за какво става въпрос и в същото време се препоръчва **Upper Camel Case конвенцията**. На кратко това е правило за **именуване на елементи от кода** в които всяка дума включително първата започва с **главна буква**. Примерно в този курс се започва с лекция на име **First steps in coding** и следователно проекта(solution) е добре да се казва **"FirstStepsInCoding"**. Същата конвенция важи и за файловете в даден проект. Ако вземем за пример първата задача от лекцията **First steps in coding** тя се казва **Hello World** и следователно нашия файл в проекта, ще се казва **"HelloWorld"**.</p>
<p>
&nbsp;&nbsp;Нещата седят по-различно спрямо променливи. Правилото за именуване на променливи гласи, че името трябва да е **кратко и описателно** и да се състои само от букви от английската азбука като първо започва с **малка буква и след това всяка дума започва с главна**. Това е още познато като **Lower Camel Case**. Примерно ако имаме променлива, която трябва да държи в себе си нечие първо име то е подобаващо да се казва **"firstName"**. Първоначално всички тези правила може да ни се струват безсмислени и ненужни, но с течение на времето и натрупването на опит ще видите нуждата от норми за писане на качествен код, за да може да се работи по-лесно и по-бързо в екип. Ще разберете, че е изключително досадно да четете код, който не сте писали вие и е написан без да се спазват никакви правила за качествен код.
</p>

TODO: Именуване на проекти, файлове, променливи


## Бързи клавиши във Visual Studio
<p>В миналата глава ви споменах, за две комбинации за форматиране на код. Едната комбинация( **CTRL + K, CTRL +D**) беше за **форматиране на целия код в даден файл**, а втората ( **CTRL + K , CTRL + F**) ни служеше в случай, че искаме да **форматираме само дадена част от кода**. Тези комбинации се наричат **бързи клавиши** и сега ще говорим по-подробно за тях. </p>
&nbsp;&nbsp;<p>Бързи клавиши са комбинации, които ни помагат да правим дадени неща, по-лесно и по-бързо като всяка програма за писане на код има своите си бързи клавиши, въпреки че повечето се повтарят. Ние ще разгледаме подробно бързите клавиши във **Visual Studio**.</p>
  &nbsp;&nbsp;<p>Една подобна комбинация е **CTRL + F**, което отваря търсачка с която ние можем да търсим в кода. Този бърз клавиш може да се ползва и в други програми за писане на код и в сайтове и като цяло почти навсякъде. Друга комбинация, която не е универсална е комбинацията за **автоматично закоментиране на код** (**CTRL+K, CTRL+C**). Тя е полезна в случай, че искаме да **закоментираме част от кода си**, за да проверим друга дали работи правилно.Има и друга комбинация, която **разкоментира код** и тя е **CTRL + K + CTRL + U**. В случай, че сме ползвали комбинацията **CTRL + K , CTRL + C** и искаме да **обърнем ефекта** то ние можем да ползваме друга много полезна комбинация - **CTRL + Z**. Тя връща кода 1 промяна назад. В случай, че имаме **не закоментиран код** и използваме **CTRL + K, CTRL + C** да закоментираме маркирана част от кода то при натискане на **CTRL + Z** ще се върнем назад и кода ще си пак **не закоментиран**. Тази команда не работи само за това да връща назад след използване на друга команда, а дори при писане на нещо. Можем и да го повтаряме и да обърнем, колкото и промени имаме от създаването на файла по който работим. В случай, че се върнем назад и не сме правили нови промени и тук можем да обърнем ефекта. За целта имаме няколко комбинации - **CTRL + Y**, **CTRL + SHIFT + Z** или **SHIFT+Alt+Backspace**. Накратко, ако изтрием нещо с **CTRL+Z** и не направим промени след това - можем да обърнем  ефекта и да се върнем назад откъдето започнахме.</p> 
  <p>&nbsp;&nbsp; Има доста, **бързи клавиши във Visual Studio**, които можете да разгледате тук - https://msdn.microsoft.com/en-us/library/da5kh0wa.aspx</p>
  
## Шаблони с код (code snippets)

Във Visual Studiо има нещо шаблони с код( code snippets) при които като натиснеш нещо специфично се генерира даден код. Примерно при изписването на "cw" и след това натискане 2 пъти на "tab" се появява "Console.WriteLine();". В тази под глава ще ви науча как вие можете да си направите ваш собствен шаблон и за примера ще си направим шаблон за направата на Console.ReadLine() като пишем "cr" и 2 таб-а. Като за начало ще си създадем нов празен проект и ще отидем на Tools - Code Snippet Manager, както е показано на снимката -  ![Tools menu](/assets/chapter-10-images/Screenshot_1.png) . След това ще видим различни снипети за различни езици и ще натиснем Visual C# при което ще видим всички готови снипети за C#. Интересува ни пътя до файловете. Това е показано на снимката - ![Snipetts Menu](/assets/chapter-10-images/Screenshot_2.png) . Взимаме пътя и отваряме даден файл примерно шаблона за cw  и той изглежда ето така ![CW Snippet code](/assets/chapter-10-images/Screenshot_2.png). Има доста неща, които ще разберете по-нататък както означават, но засега нека се фокусираме върху частта `<Title><Title>`, `<Shortcut><Shortcut>` и кода между `CDATA[]`. Първо ще сменим заглавието, което седи между `<Title><Title>` и вместо "cw" ще напишем "cr" като това е заглавието на нашия шаблон. След това ще сменим това, което трябва да напишем за нашия шаблон (shortcut) от "cw" на "cr" в `<Shortcut><Shortcut>`
TODO: Code snippets - как да си направим Code Snippet?
TODO: примерен code snippet: cri -> int i = int.Parse(Console.ReadLine());


## Техники за дебъгване на кода
**Дебъгването** е важна част от процеса на създаване на нещо свързано с програмиране ( било то сайт, десктоп приложение и т.н.).
Много често ще имате грешки в кода си и ще искате да ги намерите бързо и без губене на много време. За да го постигнете ще е удобно да използвате **дебъгера във Visual Studio**.

TODO: Дебъгване на код - работа с [F10], [F11] и breakpoints - накратко!


## Справочник с хитрости
<p>&nbsp;&nbsp; В тази подглава ще ви покажа как се **форматира с 2 десетични цифри** и други полезни или основни неща в случай, че забравите.</p>
&nbsp;&nbsp;**Вкарване на променливи в стринг (string)** :

```cs
var text = "some text"
Console.WriteLine("{0}",text);
//това ще изкара на конзолата "some text"
```

В случая използваме **"{0}"** за плейсхолдър (placeholder) като **числото отговаря на броя променливи като броим от 0**. Следователно ако подаваме 2 променливи ще имаме един плейсхолдър, който ще е **"{0}"** и той ще съдържа стойността на **първата променлива** и още един плейсхолдър "{1}", който ще съдържа стойността на **втората променлива**. Примерно :

```cs
var text = "some text"
var number = 5;
Console.WriteLine("{0} {1} {0}",text,number);
//това ще изкара "some text 5 some text
```

В този пример забелязваме, че можем да вкарваме **не само текст**, но и числа и също така можем да слагаме дадена променлива **няколко пъти** в текст и за целта просто в плейсхолдъра слагаме числото, което **отговаря на позицията на променливата**. В случая на нулева позиция(първа) стои променливата **text**, а на първа позиция(втора) е променливата **number**. Номерацията е объркваща отначало, но трябва да запомните, че **броенето започва от 0** и всяка позиция е една назад.
<p>&nbsp;&nbsp; **Форматиране с 2 десетични цифри** :

```cs
var number = 5.432432
Console.WriteLine(Math.Round(number,2));
//това ще изкара на конзолата "5.43"
```

Math.Round() приема 2 параметъра като първия е числото, което искаме да закръглим и втория параметер е числото, което определя с колко знака след десетичната запетая като това число винаги трябва да бъде цяло число! Ако искаме да закръглим до 2 знака след десетичната запетая и третия знак е по-малък от 3, както в примера по-горе, то втория знак остава непроменен, но ако  третия знак е по-голям от 5 то увеличаваме втория знак с 1, както е в примера по-долу:

```cs
var number = 5.439
Console.WriteLine(Math.Round(number,2));
//това ще изкара на конзолата "5.44"
```

//ТОДО : какво се случва при 5
В случай, че искаме винаги да закръгляме надолу можем вместо Math.Round() да използваме друг метод - Math.Floor(), който винаги закръгля надолу, но също така винаги закръгля до цяло число. Ако имаме числото 5.99 и използваме Math.Floor(5.99) то ние ще получим числото 5. Можем и да направим точно обратното - винаги да закръгляме нагоре, използвайки метода Math.Ceiling(). Отново ако имаме число примерно 5.11 и използваме Math.Ceiling(5.11) то ние ще получим 6. Това е показано и в примерите по-долу:

```cs
var numberToFloor = 5.99;
var numberToCeiling = 5.11;
Console.WriteLine(Math.Floor(numberToFloor));//това ще изкара на конзолата 5
Console.WriteLine(Math.Ceiling(numberToCiling));//това ще изкара на конзолата 6
```

&nbsp;&nbsp; **Как се прави цикъл**
<p>Има различни видове цикли,чиято работа е да минават през даден код определен брой пъти, но ние ще се фокусираме върху for циклите на които е отделена цяла глава, която можете да видите за допълнителна информация ТОДО:Коя беше главата?
За един for цикъл ни трябват няколко неща - декларация на брояч, който брои колко пъти се върти цикъла, проверка с дадено условие дали брояча е валиден и промяна на брояча. Тези неща се слагат в обикновени скоби"()" разделени едно от друго с точка и запетая ";" и след тях следват две къдрави скоби "{}". Всичко това можете да видите как изглежда в примера по-долу:</p>

```cs
for(var i = 0; i < 5; i++;)
{

}
```

Много е важно да не забравите да затворите къдравите скоби или да напишете всички точки и запетайки (;). За да направите един for цикъл ви трябват общо 3 точки и запетайки (;). Една след декларацията на брояча, една след проверката дали брояча отговаря на дадено условие и една след промяната на брояча!
&nbsp;&nbsp; **Как сe прави if проверка**
За да направим една единствена if проверка ни трябва "if()" и между скобите някаква проверка като примерно "5 == 5", но за да работи трябва да запомните, че се използва двоен знак за равенство (==). Единичния знак за равенство се използва за присвояване, а двойния за проверка дали две неща са еднакви.

```cs
if(5==5)
{

}
```
В допълнение можем да направим if проверка и ако искаме да се случи конректно нещо, ако проверката е грешна то можем да добавим else. По този начин ще обхванем всички възможни случаи, които са два - в единия случай ще влезем в if проверката и във втория случай всичко, което не влезе в проверката. Това се нарича if-else конструкция. Специфичното при нея е, че else няма обикновени скоби или условие. То е просто else думата с две къдрави скоби.

```cs
if(5==5)
{

}
else
{

}
```
TODO: Cheat sheet: така се прави цикъл, така се прави проверка, така се форматира с 2 десетични цифри, ...


## Какво научихме от тази глава?

В настоящата глава се запознахме с някои хитрости, хакове, техники и инструменти за по-ефективно писане на код, решаване на задачи и откриване и отстраняване на грешки в кода. Ако не сте ги пробвали, поиграйте си с тях, защото те помагат на програмистите да бъдат ефективни и да пишат по-качествен софтуер.
