### Задача: графично приложение „Суматор за числа“

Да се напише **графично (GUI) приложение**, което **изчислява сумата на две числа**:

![](/assets/chapter-1-images/07.Numbers-sum-01.png)

При въвеждане на две числа в първите две текстови полета и натискане на бутона [**Calculate**] се изчислява тяхната сума и резултатът се показва в третото текстово поле. За нашето приложение ще използваме **технологията Windows Forms**, която позволява създаване на **графични приложения за Windows**, в среда за разработка **Visual Studio** и с **език** за програмиране **C#**.

Във Visual Studio създаваме **нов C# проект от тип „Windows Forms Application“**:

![](/assets/chapter-1-images/07.Numbers-sum-02.png)

При създаването на Windows Forms приложение ще се появи **редактор за потребителски интерфейс**, в който могат да се слагат **различни визуални елементи** (например кутийки с текст и бутони):

![](/assets/chapter-1-images/07.Numbers-sum-03.png)

Изтегляме от лентата вляво (Toolbox) **три текстови полета** (**`TextBox`**), **два надписа** (**`Label`**) и **един бутон** (**`Button`**), след което ги подреждаме в прозореца на приложението. След това **променяме имената на всяка от контролите**. Това става от **прозорчето “Properties”** вдясно, чрез промяна на полето (**`Name`**):

![](/assets/chapter-1-images/07.Numbers-sum-04.png)

*	Имена на текстовите полета: **`textBox1`**, **`textBox2`**, **`textBoxSum`**
* Име на бутона: **`buttonCalculate`**
*	Име на формата: **`FormCalculate`**

**Променяме заглавията** (**`Text`** свойството) на контролите:

*	buttonCalculate -> Calculate
*	label1 -> +
*	label2 -> =
*	Form1 -> Sumator

![](/assets/chapter-1-images/07.Numbers-sum-05.png)

**Преоразмеряваме и подреждаме контролите**, за да изглеждат по-добре:

![](/assets/chapter-1-images/07.Numbers-sum-06.png)

Опитваме да пуснем приложението с [**Ctrl+F5**]. То би трябвало да стартира, но да **не функционира напълно**, защото не сме написали какво се случва при натискане на бутона.

![](/assets/chapter-1-images/07.Numbers-sum-07.png)

Сега е време да напишем кода, който **сумира числата** от първите две полета и **показва резултата** в третото поле. За целта кликваме **два пъти върху бутона [Calculate]**. Ще се появи място, в което да напишем какво да се случва при натискане на бутона:

![](/assets/chapter-1-images/07.Numbers-sum-08.png)

Написваме следния C# код между отварящата и затварящата скоба **`{ }`**, където е курсорът:

![](/assets/chapter-1-images/07.Numbers-sum-09.png)

Този код **взима първото число** от полето **`textBox1`** и го запазва **в променливата `num1`**, запазва **второто число** от полето **`textBox2`** в **променливата `num2`**, след това **сумира `num1` и `num2` в променливата `sum`** и накрая **извежда текстовата стойност на променливата `sum`** в полето **`textBoxSum`**.

Стартираме отново програмата с [**Ctrl+F5**] и проверяваме дали работи коректно. Правим опит да сметнете **4 + 5**, а след това **-12.5 + 1.3**:

![](/assets/chapter-1-images/07.Numbers-sum-10.png) ![](/assets/chapter-1-images/07.Numbers-sum-11.png)

Пробваме и с **невалидни числа**, напр. “**aaa**” и “**bbb**”. Изглежда има проблем: 

![](/assets/chapter-1-images/07.Numbers-sum-12.png) ![](/assets/chapter-1-images/07.Numbers-sum-13.png)

Проблемът идва от **прехвърлянето на текстово поле в число**. Ако стойността в полето **не е число, програмата дава грешка**. Можем да поправим кода, за да коригираме този проблем:

![](/assets/chapter-1-images/07.Numbers-sum-14.png)

Горният код **прихваща грешките при работа с числа** (хваща изключенията) и в случай на грешка **извежда стойност `error`** в полето с резултата. Стартираме отново програмата с [**Ctrl+F5**] и я пробваме дали работи. Този път **при грешно число резултатът е `error`** и програмата не се чупи:

![](/assets/chapter-1-images/07.Numbers-sum-15.png) ![](/assets/chapter-1-images/07.Numbers-sum-16.png)

Сложно ли е? Нормално е да е сложно, разбира се. Тъкмо започваме да навлизаме в програмирането. Примерът по-горе изисква още много знания и умения, които ще развиваме в тази книга и даже и след нея. Просто си позволете да се позабавлявате с desktop програмирането. Ако не тръгва нещо, гледайте **видеото в началото на тази глава** или питайте във **форума на СофтУни**: https://softuni.bg/forum. Или продължете смело напред към следващия пример или към следващата глава от книгата. Ще дойде време и ще ви е лесно, но наистина трябва да вложите **усърдие и постоянство**. Програмирането се учи бавно и с много, много практика.
